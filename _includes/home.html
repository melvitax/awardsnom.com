<main class="hide">
<div class="pb-5 main-content">
<div class="container">
<div class="row card-columns">
    {% assign event = "oscars" %}
    {% assign year = "2021" %}
    {% assign data = site.data.legacy %}
    <h2 class="show-title col-10 pt-4 pb-2 text-center">{{ event | upcase }} {{ year }}</h2>
    {% for cat in data.categories %}
    <h3 class="col-10 pt-4 pb-2">{{ cat.name }}</h3>
    {% for film in data.nominees %}
    {% assign nominated = film.nominated | where: "category", cat.key %}
    {% for nominee in nominated %}
    <div class="col-5 col-sm-3 col-md-2 pt-4" >
        {% capture key %}{% if nominee.key %}{{ nominee.key }}{% else %}{{ film.key }}{% endif %}{% endcapture %}
        {% capture id %}{{ event }}_{{ year }}_{{ cat.key }}_{{ key }}{% endcapture %}
        {% capture image %}{% if nominee.image %}{{ nominee.image }}{% else %}{{ film.key }}{% endif %}{% endcapture %}
        <div class="animate card mb-3 shadow-sm" id="card__{{ id }}">
            <div class="row no-gutters"> 
                <!-- Poster -->
                <a class="grow poster fav" >
                <img class="card-img-top w-100 h-100" src="assets/uploads/{{ image }}.jpg" width="230" height="355" alt="{{ name }}" />
                <!-- Favorite -->
                <div  class="fav-button position-absolute" style="top: 16px; right: 16px; z-index: 2; width: 44px; height: 44px;">&nbsp;</div>
                </a>
                {% if nominee.winner %}
                <!-- Winner -->
                <div class="bg-danger w-100 text-light py-2 text-center text-monospace">WINNER</div>{% endif %}
                <!-- Title -->
                <div class="text-wrap text-muted text-monospace  text-center position-absolute w-100 home-film-title" style="top: -1.8em; z-index: 0"><small>{{ film.name }}</small></div>
                <!-- Sub -->
                <div class="sub p-2 w-100">
                    {% if nominee.name %}{{ nominee.name }}<br />{% endif %}
                    {% if nominee.sub %}{{ nominee.sub }}<br />{% endif %}
                    {% if film.trailer %}
                    {% if film.trailer contains "youtube.com" %}
                    {% assign urlParts = film.trailer | split: "v=" %}
                    {% assign videoID = urlParts[1] %}
                    {% assign src = 'https://www.youtube.com/embed/' | append: videoID | append: '?showinfo=0&modestbranding=0&color=white&autoplay=0' %}
                    <a href="#" class="btn btn-outline-secondary btn-block mt-2" data-toggle="modal" data-target="#videoModal" data-theVideo="{{ src }}"><span class="fa fa-play"> Play Trailer</span></a>
                    {% elsif film.trailer contains "vimeo.com" %}
                    {% assign urlParts = film.trailer | split: "/" %}
                    {% assign videoID = urlParts | last %}
                    {% assign src = 'https://player.vimeo.com/video/' | append: videoID | append: '?title=0&byline=0&portrait=0' %}
                    <a href="#" class="btn btn-outline-secondary btn-block mt-2" data-toggle="modal" data-target="#videoModal" data-theVideo="{{ src }}"><span class="fa fa-play"> Play Trailer</span></a>
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </div> 
    </div>
    {% endfor %}
    {% endfor %}
    {% endfor %}    
</div>
</div>
</div>

<!-- Modal Window -->
<div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModal" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <div class="video_wrapper">
                <iframe width="100%" height="100%" src="" allowfullscreen allow="autoplay"></iframe>
            </div>
        </div>
      </div>
    </div>
</div>

</main>
